<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÏÉÅÌïòÏù¥ 4Î∞ï 5Ïùº Ïó¨Ìñâ ÌîåÎûòÎÑà</title>
  <style>
    :root {
      --color-red-primary: #e50914;
      --color-red-dark: #b20710;
      --color-red-light: #ff4b4b;
      --color-text-dark: #111827;
      --color-text-light: #6b7280;
      --color-white: #ffffff;
      --color-gray-light: #e5e7eb;
      --color-gray-lighter: #f9fafb;
      --color-blue-accent: #2563eb;
      --color-green-accent: #16a34a;
      --shadow-soft: 0 10px 30px rgba(15, 23, 42, 0.12);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
      background-color: #f3f4f6;
      color: var(--color-text-dark);
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      min-height: 100vh;
      background-color: var(--color-white);
      box-shadow: var(--shadow-soft);
    }

    /* Ìó§Îçî */
    .header {
      background: radial-gradient(circle at 0% 0%, #ff6666 0, #e50914 35%, #b00000 100%);
      color: var(--color-white);
      padding: 14px 18px 18px;
      position: relative;
      overflow: hidden;
      text-align: center;
    }

    .header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 0%, rgba(255,255,255,0.18) 0, transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .header-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .header-label {
      font-size: 10px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      opacity: 0.9;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .header-label-icon {
      font-size: 13px;
    }

    .header-title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .header-meta-row {
      margin-top: 2px;
      display: flex;
      justify-content: center;
      gap: 8px;
      font-size: 11px;
      opacity: 0.9;
    }

    .meta-item {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .meta-icon {
      font-size: 13px;
    }

    /* ÏßÑÌñâÎ•† ÏÉÅÏûê */
    .progress-row {
      margin-top: 10px;       
      width: 100%;
      padding: 8px 14px;     
      border-radius: 10px;  
      position: relative;
      background: rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .progress-texts {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }

    .progress-label {
      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.01em; 
      opacity: 0.95;
    }

    .progress-percent {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 0.04em;
    }

    .progress-gauge {
      height: 6px;
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
      overflow: hidden;
      position: relative;
    }

    .progress-gauge-fill {
      height: 100%;
      background: linear-gradient(90deg, #ffe14b, #facc15, #54dc0a);
      border-radius: 3px;
      width: 0%;
      transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .progress-gauge-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Day ÌÉ≠ */
    .day-tabs {
      display: flex;
      gap: 10px;
      padding: 24px 16px 8px;
      justify-content: center;
      background-color: var(--color-white);
      border-bottom: 1px solid var(--color-gray-light);
    }

    .day-tabs::-webkit-scrollbar {
      height: 4px;
    }
    .day-tabs::-webkit-scrollbar-thumb {
      background: var(--color-gray-light);
      border-radius: 2px;
    }

    .day-tab {
      padding: 8px 18px;
      border-radius: 999px;
      border: 1px solid var(--color-gray-light);
      background: var(--color-gray-lighter);
      font-size: 13px;
      font-weight: 600;
      color: var(--color-text-dark);
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.2s;
    }

    .day-tab.active {
      background: var(--color-text-dark);
      color: var(--color-white);
      border-color: var(--color-text-dark);
    }

    .content {
      padding: 16px 16px 24px;
      background: var(--color-white);
    }

    /* Ïπ¥Îìú */
    .event-card {
      background-color: var(--color-white);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid var(--color-gray-light);
      box-shadow: 0 2px 8px rgba(15,23,42,0.06);
      cursor: pointer;
      transition: box-shadow 0.2s, transform 0.1s, background 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 88px;
      justify-content: center;
      position: relative;
    }

    .event-card.completed {
      background: #ecfdf3;
      border-color: #bbf7d0;
    }

    .event-card:hover {
      box-shadow: 0 4px 12px rgba(15,23,42,0.12);
      transform: translateY(-1px);
    }

    .event-header {
      display: flex;
      gap: 8px;
      align-items: center;
      width: 100%;
      padding: 0 8px;
    }

    .event-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 3px;
      min-width: 0;
    }

    .event-time {
      font-size: 13px;
      color: var(--color-blue-accent);
      font-weight: 700;
      line-height: 1.2;
    }

    .event-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--color-text-dark);
      line-height: 1.3;
      word-break: keep-all;
    }

    .event-description {
      font-size: 12px;
      color: var(--color-text-light);
      line-height: 1.4;
    }

    .event-location {
      font-size: 11px;
      color: var(--color-blue-accent);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      line-height: 1.3;
    }

    .event-location:hover {
      text-decoration: underline;
      color: var(--color-red-primary);
    }

    .checkbox {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      border: 2px solid var(--color-gray-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      color: var(--color-green-accent);
      background: var(--color-white);
      flex-shrink: 0;
    }

    .event-card.completed .checkbox {
      background: var(--color-green-accent);
      color: white;
      border-color: var(--color-green-accent);
    }

    @media (max-width: 480px) {
      .container {
        max-width: 100%;
        box-shadow: none;
      }
      .header {
        border-radius: 0;
      }
      .day-tab {
        flex: 11 calc(25% - 8px);
        text-align: center;
        padding: 8px 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ìó§Îçî -->
    <div class="header">
      <div class="header-content">
        <div class="header-label">
          <span class="header-label-icon">‚úàÔ∏è</span>
          <span>TRAVEL PLANNER</span>
        </div>
        <div class="header-title">ÏÉÅÌïòÏù¥ 4Î∞ï 5Ïùº</div>
        <div class="header-meta-row">
          <div class="meta-item">
            <span>2026.01.16 - 01.20</span>
          </div>
        </div>

        <!-- ÏßÑÌñâÎ•† -->
        <div class="progress-row">
          <div class="progress-texts">
            <div class="progress-label">Ïó¨Ìñâ ÏßÑÌñâÎ•†</div>
            <div class="progress-percent" id="progressPercent">0%</div>
          </div>
          <div class="progress-gauge">
            <div class="progress-gauge-fill" id="progressGaugeFill"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Day Tabs -->
    <div class="day-tabs" id="dayTabs">
      <button class="day-tab active" data-day="0">Day 1</button>
      <button class="day-tab" data-day="1">Day 2</button>
      <button class="day-tab" data-day="2">Day 3</button>
      <button class="day-tab" data-day="3">Day 4</button>
      <button class="day-tab" data-day="4">Day 5</button>
    </div>

    <!-- Content -->
    <div class="content">
      <div id="dayContent"></div>
    </div>
  </div>

  <script>
    const tripData = [
      {
        day: 1,
        events: [
          {
            time: "16:10",
            title: "Ïù∏Ï≤úÍ≥µÌï≠ÏóêÏÑú Ï∂úÎ∞ú",
            description: "Ï∂úÍµ≠ÌïòÍ∏∞",
            completed: false
          },
          {
            time: "17:20",
            title: "ÏÉÅÌïòÏù¥ Ìë∏Îë•Í≥µÌï≠ ÎèÑÏ∞©",
            description: "ÏûÖÍµ≠ Î∞è Ìò∏ÌÖî Ï≤¥ÌÅ¨Ïù∏",
            location: "ÏàôÏÜå",
            searchQuery: "ÁæéÂà©Â±ÖÈÖíÂ∫ó(‰∏äÊµ∑ÂüéÂ∏Ç‰∏≠ÂøÉ‰∫∫Ê∞ëÂπøÂú∫Â∫ó)",
            completed: false
          },
          {
            title: "ÎÑ§ÏùºÏÉµ Î∞©Î¨∏ Î∞è ÏãúÎÇ¥ Íµ¨Í≤Ω",
            location: "ÎÑ§ÏùºÏÉµ",
            searchQuery: "ÎÑ§ÏùºÏÉµ",
            completed: false
          },
          {
            title: "ÌïòÏù¥ÎîîÎùºÏò§(Ï†ÄÎÖÅ)",
            description: "Ï§ëÍµ≠Ïãù ÏÉ§Î∏åÏÉ§Î∏å Ï†ÑÎ¨∏Ï†ê",
            location: "ÌïòÏù¥ÎîîÎùºÏò§",
            searchQuery: "Êµ∑Â∫ïÊçû",
            completed: false
          }
        ]
      },
      {
        day: 2,
        events: [
          {
            title: "Î∞îÏù¥Î°ÑZX",
            location: "Ïò§ÌÉÄÏø†(1)",
            searchQuery: "ÁôæËÅîZXÂàõË∂£Âú∫",
            completed: false
          },
          {
            title: "ÌóåÏßÄÏö∞Ïù¥ÏπòÏóî(Ï†êÏã¨)",
            description: "ÏñëÍº¨Ïπò Ï†ÑÎ¨∏Ï†ê",
            location: "ÌóåÏßÄÏö∞Ïù¥ÏπòÏóî",
            searchQuery: "Âæà‰πÖ‰ª•ÂâçÁæäËÇâ‰∏≤",
            completed: false
          },
          {
            title: "Ï°∞Ïù¥ÏãúÌã∞",
            location: "Ïò§ÌÉÄÏø†(2)",
            searchQuery: "‰∏äÊµ∑ÈùôÂÆâÂ§ßÊÇ¶Âüé",
            completed: false
          },
          {
            title: "ÎÇúÏßïÎèôÎ£®",
            description: "ÏÉÅÌïòÏù¥ Ï§ëÏã¨Ïùò ÎåÄÌëú ÏáºÌïë Í±∞Î¶¨",
            location: "ÎÇúÏßïÎèôÎ£®",
            searchQuery: "Âçó‰∫¨‰∏úË∑Ø",
            completed: false
          },
          {
            title: "M&M's World",
            description: "Îã§ÏñëÌïú ÏÉâÏÉÅÏùò M&M Ï¥àÏΩúÎ¶øÍ≥º ÍµøÏ¶àÎ•º ÌåêÎß§ÌïòÎäî Ï≤¥ÌóòÌòï Îß§Ïû•",
            location: "Ïó†ÏóîÏó† ÏõîÎìú",
            searchQuery: "mË±ÜÂ∑ßÂÖãÂäõ‰∏ñÁïå(‰∏äÊµ∑‰∏ñËåÇÂπøÂú∫Â∫ó)",
            completed: false
          },
          {
            title: "MINI SO",
            description: "Îã§ÏñëÌïú ÏÉÅÌíàÏùÑ ÌåêÎß§ÌïòÎäî ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº Îß§Ïû•",
            location: "ÎØ∏ÎãàÏÜåÎûúÎìú",
            searchQuery: "ÂêçÂàõ‰ºòÂìÅ(Âçó‰∫¨‰∏úË∑Ø670Âè∑Â∫ó)",
            completed: false
          },
          {
            title: "Sisyphus",
            description: "ÎπàÌã∞ÏßÄ ÎîîÏßÄÌÑ∏ Ïπ¥Î©îÎùº Îß§Ïû•",
            location: "ÏãúÏãúÌè¨Ïä§",
            searchQuery: "Sisyphus¬∑Ë•øË•øÂºóÊñØÁõ∏Êú∫ÂïÜÂ∫ó",
            completed: false
          },
          {
            title: "Sephora",
            description: "ÌôîÏû•Ìíà Îß§Ïû•",
            location: "ÏÑ∏Ìè¨Îùº",
            searchQuery: "‰∏ùËäôÂÖ∞Sephora(LU¬∑ONEÂáØÂæ∑Êô∂ËêÉÂπøÂú∫Â∫ó)",
            completed: false
          },
          {
            title: "Ï†êÎèÑÎçï(Ï†ÄÎÖÅ)",
            description: "Ï†ÑÌÜµ Îî§ÏÑ¨",
            location: "Ï†êÎèÑÎçï",
            searchQuery: "ÁÇπÈÉΩÂæ∑",
            completed: false
          },
          {
            title: "ÏôÄÏù¥ÌÉÑ",
            description: "ÏÉÅÌïòÏù¥Ïùò ÎåÄÌëúÏ†ÅÏù∏ Í¥ÄÍ¥ëÏßÄ",
            location: "ÏôÄÏù¥ÌÉÑ",
            searchQuery: "Â§ñÊª©",
            completed: false
          }
        ]
      },
      {
        day: 3,
        events: [
          {
            title: "Ïö∞Ï∫âÎß®ÏÖò",
            description: "ÌîÑÎûëÏä§ Ï°∞Í≥ÑÏßÄ ÏãúÎåÄÏùò Ïó≠ÏÇ¨Ï†Å Í±¥Ï∂ïÎ¨º",
            location: "Ïö∞Ï∫âÎß®ÏÖò",
            searchQuery: "Ê≠¶Â∫∑Â§ßÊ•º",
            completed: false
          },
          {
            title: "ÌõÑÏãúÎùºÏò§ÎÜçÌÉïÎØ∏ÏóîÍ¥Ä(Ï†êÏã¨)",
            description: "ÏÉÅÌïòÏù¥ Ï†ÑÌÜµ Íµ≠ÏàòÏßë",
            location: "ÌõÑÏãúÎùºÏò§ÎÜçÌÉïÎØ∏ÏóîÍ¥Ä",
            searchQuery: "Ê≤™Ë•øËÄÅÂºÑÂ†ÇÈù¢È¶Ü",
            completed: false
          },
          {
            title: "ÏáºÌïë",
            description: [
              "muchuan vintage",
              "Shanghai Xuhui No.82, Xinle Road (Basement FG)",
              "Shanghai Xuhui Xinle Road No.80 (Sweet Chilling, Ïò∑)",
              "Shanghai Xuhui Wukang Road No.55 (HARMAY Huamei, ÌôîÏû•Ìíà)",
              "ÌôÄÎ¶¨ÎûúÎìú",
              "‰∏äÊµ∑Â∏ÇÂæêÊ±áÂå∫ÂòâÂñÑË∑Ø142Âè∑ (G3-STUDIO, Ïä§Ìã∞Ïª§ ÏÇ¨ÏßÑÏÉµ)"
            ],
            completed: false
          },
          {
            title: "ÎåÄÌïúÎØºÍµ≠ ÏûÑÏãúÏ†ïÎ∂Ä",
            location: "ÏûÑÏãúÏ†ïÎ∂Ä",
            searchQuery: "Â§ßÈü©Ê∞ëÂõΩ‰∏¥Êó∂ÊîøÂ∫úÊóßÂùÄ",
            completed: false
          },
          {
            time: "17:00",
            title: "ÏòàÏõê",
            description: "ÏôïÌôç Ï≤¥Ìóò Î∞è Ï†ÑÌÜµ Ï§ëÍµ≠ Ï†ïÏõê Í∞êÏÉÅ",
            location: "ÏôïÌôçÏÉµ",
            searchQuery: "Ë±´ËßÅÊ±âÊúç‰ΩìÈ™åÈ¶Ü ‰∏äÊµ∑Â∏ÇÈªÑÊµ¶Âå∫‰∏ΩÊ∞¥Ë∑Ø81Âè∑Á¥´Èî¶ÂüéË¥ü‰∏ÄÂ±ÇB39",
            completed: false
          },
          {
            title: "Ïπ¥Ïò§ÏúÑ(Ï†ÄÎÖÅ)",
            description: "Ï§ëÍµ≠Ïãù Íµ¨Ïö¥ ÏÉùÏÑ† ÏöîÎ¶¨ Ï†ÑÎ¨∏Ï†ê",
            location: "Ïπ¥Ïò§ÏúÑ",
            searchQuery: "ÁÉ§È±º",
            completed: false
          }
        ]
      },
      {
        day: 4,
        events: [
          {
            time: "11:00",
            title: "Ìó§Îìú Ïä§Ìåå",
            location: "ÎßàÏÇ¨ÏßÄÏÉµ(1)",
            searchQuery: "Ê≤êÊ£ÆSpa¬∑Â•Ω‰∫´Â§¥Âüü",
            completed: false
          },
          {
            title: "ÎßàÎùºÎ°±ÏÉ§(Ï†êÏã¨)",
            description: "Ï§ëÍµ≠Ïãù ÎØºÎ¨º Í∞ÄÏû¨ ÏöîÎ¶¨ Ï†ÑÎ¨∏Ï†ê",
            location: "ÎßàÎùºÎ°±ÏÉ§",
            searchQuery: "È∫ªËæ£Â∞èÈæôËôæ",
            completed: false
          },
          {
            title: "ÎîîÏ¶àÎãàÎûúÎìú",
            description: "ÎîîÏ¶àÎãàÏùò Ïù∏Í∏∞ Ï∫êÎ¶≠ÌÑ∞ÏôÄ ÌÖåÎßàÎ°ú Íæ∏Î©∞ÏßÑ ÎåÄÍ∑úÎ™® ÌÖåÎßàÌååÌÅ¨",
            location: "ÎîîÏ¶àÎãàÎûúÎìú",
            searchQuery: "‰∏äÊµ∑Ëø™Â£´Â∞ºÂ∫¶ÂÅáÂå∫",
            completed: false
          },
          {
            time: "23:00",
            title: "ÎèÑÏõêÌñ•",
            location: "ÎßàÏÇ¨ÏßÄÏÉµ(2) ÎÇ®Í≤ΩÎèôÎ°ú Ï†úÏùºÎ∞±ÌôîÏ†ê 7Ï∏µ",
            searchQuery: "Ê°ÉÊ∫êÈÑï",
            completed: false
          }
        ]
      },
      {
        day: 5,
        events: [
          {
            title: "ÎùºÏò§Ìè¨ÏßÄÏïÑ(ÏïÑÏπ®)",
            description: "Í∞ÄÏ†ïÏãù Ï§ëÏãù Î†àÏä§ÌÜ†Îûë",
            location: "ÎùºÏò§Ìè¨ÏßÄÏïÑ",
            searchQuery: "Â§ñÂ©ÜÂÆ∂",
            completed: false
          },
          {
            time: "11:00",
            title: "ÏÉÅÌïòÏù¥ Ìë∏Îë•Í≥µÌï≠ÏúºÎ°ú Ïù¥Îèô",
            location: "Ìë∏Îë•Í≥µÌï≠",
            searchQuery: "‰∏äÊµ∑Êµ¶‰∏úÂõΩÈôÖÊú∫Âú∫",
            completed: false
          },
          {
            time: "14:25",
            title: "ÏÉÅÌïòÏù¥ Ìë∏Îë•Í≥µÌï≠ÏóêÏÑú Ï∂úÎ∞ú",
            description: "Ï∂úÍµ≠ÌïòÍ∏∞",
            completed: false
          },
          {
            time: "17:25",
            title: "Ïù∏Ï≤úÍ≥µÌï≠ ÎèÑÏ∞©",
            description: "ÏûÖÍµ≠ Î∞è Ïßë Í∞ÄÍ∏∞",
            completed: false
          }
        ]
      }
    ];

    let currentDay = 0;
    let completedEvents = new Set();
    const STORAGE_KEY = 'shanghai_completed_events_v1';
    const LAST_DAY_KEY = 'shanghai_last_day_v1';

    function loadCompletedEvents() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        try { completedEvents = new Set(JSON.parse(saved)); }
        catch { completedEvents = new Set(); }
      }
    }

    function saveCompletedEvents() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify([...completedEvents]));
    }

    function loadLastDay() {
      const saved = localStorage.getItem(LAST_DAY_KEY);
      const n = parseInt(saved, 10);
      if (!isNaN(n) && n >= 0 && n < tripData.length) currentDay = n;
    }

    function saveLastDay() {
      localStorage.setItem(LAST_DAY_KEY, String(currentDay));
    }

    function updateProgress() {
      const totalEvents = tripData.reduce((s, d) => s + d.events.length, 0);
      const completedCount = completedEvents.size;
      const percent = totalEvents === 0 ? 0 : Math.round((completedCount / totalEvents) * 100);
      
      document.getElementById('progressPercent').textContent = percent + '%';
      document.getElementById('progressGaugeFill').style.width = percent + '%';
    }

    function renderDayContent(dayIndex) {
      const day = tripData[dayIndex];
      const contentDiv = document.getElementById('dayContent');

      contentDiv.innerHTML = `
        ${day.events.map((event, idx) => {
          const eventId = `${dayIndex}-${idx}`;
          const isCompleted = completedEvents.has(eventId);
          const hasSearchQuery = event.searchQuery;
          return `
            <div class="event-card ${isCompleted ? 'completed' : ''}" data-event-id="${eventId}">
              <div class="event-header">
                <div class="event-content">
                  ${event.time ? `<div class="event-time">${event.time}</div>` : ''}
                  <div class="event-title">${event.title}</div>
                  ${Array.isArray(event.description) ? 
                    event.description.map(desc => `<div class="event-description">${desc}</div>`).join('') 
                    : (event.description ? `<div class="event-description">${event.description}</div>` : '')
                  }
                  ${hasSearchQuery ? 
                    `<div class="event-location" onclick="openAmapSearch('${event.searchQuery}'); event.stopPropagation();">
                      üìç ${event.location}
                    </div>` : ''
                  }
                </div>
                <div class="checkbox">${isCompleted ? '‚úì' : ''}</div>
              </div>
            </div>
          `;
        }).join('')}
      `;

      document.querySelectorAll('.event-card').forEach(card => {
        card.addEventListener('click', (e) => {
          if (e.target.classList.contains('event-location')) return;
          const eventId = card.dataset.eventId;
          if (completedEvents.has(eventId)) completedEvents.delete(eventId);
          else completedEvents.add(eventId);
          saveCompletedEvents();
          updateProgress();
          renderDayContent(currentDay);
        });
      });
    }

    function setupDayTabs() {
      document.querySelectorAll('.day-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentDay = parseInt(tab.dataset.day);
          saveLastDay();
          renderDayContent(currentDay);
        });
      });
    }

    // üîç Amap Í≤ÄÏÉâÏ∞ΩÏóê ÏûêÎèô ÏûÖÎ†•
    function openAmapSearch(query) {
      const encodedQuery = encodeURIComponent(query);
      const amapUrl = `https://www.amap.com/search?query=${encodedQuery}&city=310000`;
      window.open(amapUrl, '_blank');
    }

    loadCompletedEvents();
    loadLastDay();
    setupDayTabs();
    document.querySelectorAll('.day-tab').forEach(tab => {
      const idx = parseInt(tab.dataset.day);
      tab.classList.toggle('active', idx === currentDay);
    });
    renderDayContent(currentDay);
    updateProgress();
  </script>
</body>
</html>